include mixins/menu-item.jade
doctype html
html(lang="de" data-ng-app="wbt" data-ng-csp)
	head
		title Einführung in die psychologische Statistik
		meta(charset="utf-8")
		base(href="/")
		link(href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet")
		link(href="bower_components/angular/angular-csp.css" rel="stylesheet")
		script(src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.4/angular.js")
		script(src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js")
		script(src="https://cdnjs.cloudflare.com/ajax/libs/restangular/1.4.0/restangular.min.js")
		script(src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.4/angular-messages.min.js")
		script(src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.4/angular-sanitize.min.js")
		script(src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.4/angular-aria.min.js")
		script(src="index.min.js")
		script(async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_HTMLorMML")
	body(data-ng-controller="wbtCtrl as wbt" data-ng-cloak)
		nav.navbar.navbar-inverse.navbar-static-top(role="navigation"): .container-fluid
			.navbar-header
				button.navbar-toggle.collapsed(type="button" data-ng-click="menuCollapse=!menuCollapse" aria-controls="mainnav" aria-expanded="{{!menuCollapse}}" aria-label="{{menuCollapse ? 'Menü ausklappen' : 'Menü einklappen'}}")
					span.icon-bar
					span.icon-bar
					span.icon-bar
				a.navbar-brand(data-ui-sref="home")
					span(ng-class="'glyphicon '+wbt.$state.get('home').data.icon" aria-hidden="true")
					span(ng-bind="::wbt.$state.get('home').data.menuText")
			#mainnav.collapse.navbar-collapse(data-collapse="menuCollapse")
				ul.nav.navbar-nav.navbar-left
					+menu-item("content","Übersicht")
					+menu-item("download","Download")
					+menu-item("software","Statistiksoftware")
					+menu-item("contact","Kontakt")
				ul.nav.navbar-nav.navbar-right(data-ng-if="!wbt.authService.loggedIn()")
					+menu-item("user.login","anmelden","log-in")
					+menu-item("user.register","registrieren","registration-mark")
				p.navbar-text.navbar-right(data-ng-if="wbt.authService.loggedIn()") Hallo 
					a.navbar-link(ui-sref="user.profile({id: wbt.authService.user()._id})")
						span.glyphicon(ng-class="wbt.$state.get('user.profile').data.icon" aria-hidden="true")
						span {{wbt.authService.user()._id}}, 
					button.btn.btn-default.navbar-btn(type="button" data-ng-click="::wbt.authService.logout()")
						span.glyphicon.glyphicon-log-out(aria-hidden="true")
						span Abmelden
		.container(data-ui-view)
