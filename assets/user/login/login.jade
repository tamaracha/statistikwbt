include ../../mixins/input.jade
include ../../mixins/submit.jade
section
	h2 Anmelden
	- var form="loginForm"
	form.form-horizontal(novalidate name=form role="form" ng-submit="wbt.authService.login(login.loginData)")
		+input("_id","username")(placeholder="username" data-ng-model="login.loginData._id" required maxlength="20" user-exists data-ng-model-options="{debounce: 500}")
			span.help-block(aria-live="assertive" ng-show="loginForm._id.$touched"): span(ng-if="loginForm._id.$valid") Dieser User existiert.
			span.help-block(ng-show="loginForm._id.$touched" role="status"): span(ng-if="loginForm._id.$pending") Prüfe Verfügbarkeit
			span.help-block(ng-messages="loginForm._id.$error" ng-show="loginForm._id.$touched")
				span(ng-message="required") Sie müssen einen Usernamen eingeben.
				span(ng-message="userExists") Dieser User existiert nicht.
		+input("password","Passwort")(type="password" ng-model="login.loginData.password" required minlength="8" placeholder="Passwort")
		.form-group: .col-xs-2-offset.col-xs-10: .btn-group
			input.btn(type="submit" data-ng-class="{'btn-primary': loginForm.$valid, 'btn-danger': loginForm.$invalid}" value="anmelden")
			input.btn.btn-default(type="button" data-ng-click="login.forgot=!login.forgot" value="Passwort vergessen" aria-expanded="{{login.forgot}}" aria-controls="forgot")
section#forgot(data-collapse="!login.forgot")
	h2 Passwort vergessen
	p Wenn Sie Ihre E-Mail-Adresse hinterlegt haben, können Sie hier Ihr Passwort zurücksetzen. Geben Sie hierzu diese Adresse unten ein. Sie bekommen dann eine E-Mail mit einem Link zugesendet. Wenn Sie ihn aufrufen, sind Sie hier wieder angemeldet und können Ihr Passwort in Ihrem Profil ändern. Der Link funktioniert für eine Stunde und Ihr altes Passwort bleibt so lange gültig, bis Sie ein neues festgelegt haben.
	- var form="forgotForm"
	form.form-horizontal(novalidate name=form ng-submit="login.forgot(login.forgotData)" role="form")
		+input("email","E-Mail-Adresse")(type="email" placeholder="email" ng-model="login.forgotData.email" required)
		+submit("E-Mail versenden")
