include ../mixins/input.jade
include ../mixins/submit.jade
section
  h2 Anmelden
  p Falls du dein Passwort nicht mehr weißt, gibt nur die E-mail-Adresse ein und klicke auf „Passwort vergessen“.
  - var form="loginForm"
  form.form-horizontal(novalidate name=form role="form" ng-submit="login.login()")
    +input("email","E-Mail-Adresse")(placeholder="name@domain.com" data-ng-model="login.loginData.email" required maxlength="20" user-exists data-ng-model-options="{debounce: 500}")
      span.help-block(aria-live="assertive" ng-show="loginForm.email.$touched"): span(ng-if="loginForm.email.$valid") Dieser User existiert.
      span.help-block(ng-show="loginForm.email.$touched" role="status"): span(ng-if="loginForm.email.$pending") Prüfe Verfügbarkeit
      span.help-block(ng-messages="loginForm.email.$error" ng-show="loginForm.email.$touched")
        span(ng-message="required") Sie müssen einen Usernamen eingeben.
        span(ng-message="userExists") Dieser User existiert nicht.
    +input("password","Passwort")(type="password" ng-model="login.loginData.password" required minlength="8" placeholder="Passwort")
    .form-group: .col-xs-2-offset.col-xs-10: .btn-group
      input.btn(type="submit" data-ng-class="{'btn-primary': loginForm.$valid, 'btn-danger': loginForm.$invalid}" value="anmelden")
      input.btn.btn-default(type="button" value="Passwort vergessen")
