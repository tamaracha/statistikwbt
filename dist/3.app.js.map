{"version":3,"sources":["webpack:///./~/angular-breadcrumb/release/angular-breadcrumb.js"],"names":[],"mappings":";;;;;AAAA;AACA;AACA,uCAAsC;;AAEtC;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,0CAAyC,oDAAoD;AAC7F,aAAY;AACZ;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yCAAwC,KAAK;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8CAA6C,cAAc;AAC3D,6CAA4C,aAAa;AACzD;AACA;AACA;AACA;AACA;;AAEA,mGAAkG;AAClG;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,kBAAiB;AACjB;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb,oDAAmD;AACnD;;AAEA;AACA,8DAA6D,UAAU;AACvE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;;AAEL;;AAEA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,4FAA2F,cAAc;AACzG,gDAA+C,wBAAwB,IAAI,yBAAyB;AACpG,4CAA2C,yBAAyB;AACpE;AACA;AACA;AACA;AACA,uDAAsD,cAAc;AACpE,gDAA+C,wBAAwB,IAAI,yBAAyB;AACpG,4CAA2C,yBAAyB;AACpE;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA,sBAAqB;AACrB;;AAEA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,kBAAiB;AACjB,sBAAqB,oBAAoB;AACzC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAqB;;AAErB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,kBAAiB;AACjB,sBAAqB,oBAAoB;;AAEzC;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA,0BAAyB;AACzB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA,0BAAyB;;AAEzB;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAqB;;AAErB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAC","file":"3.app.js","sourcesContent":["/*! angular-breadcrumb - v0.4.1\n* http://ncuillery.github.io/angular-breadcrumb\n* Copyright (c) 2015 Nicolas Cuillery; Licensed MIT */\n\n(function (window, angular, undefined) {\n'use strict';\n\nfunction isAOlderThanB(scopeA, scopeB) {\n    if(angular.equals(scopeA.length, scopeB.length)) {\n        return scopeA > scopeB;\n    } else {\n        return scopeA.length > scopeB.length;\n    }\n}\n\nfunction parseStateRef(ref) {\n    var parsed = ref.replace(/\\n/g, \" \").match(/^([^(]+?)\\s*(\\((.*)\\))?$/);\n    if (!parsed || parsed.length !== 4) { throw new Error(\"Invalid state ref '\" + ref + \"'\"); }\n    return { state: parsed[1], paramExpr: parsed[3] || null };\n}\n\nfunction $Breadcrumb() {\n\n    var $$options = {\n        prefixStateName: null,\n        template: 'bootstrap3',\n        templateUrl: null,\n        includeAbstract : false\n    };\n\n    this.setOptions = function(options) {\n        angular.extend($$options, options);\n    };\n\n    this.$get = ['$state', '$stateParams', '$rootScope', function($state, $stateParams, $rootScope) {\n\n        var $lastViewScope = $rootScope;\n\n        // Early catch of $viewContentLoaded event\n        $rootScope.$on('$viewContentLoaded', function (event) {\n            // With nested views, the event occur several times, in \"wrong\" order\n            if(!event.targetScope.ncyBreadcrumbIgnore &&\n                isAOlderThanB(event.targetScope.$id, $lastViewScope.$id)) {\n                $lastViewScope = event.targetScope;\n            }\n        });\n\n        // Get the parent state\n        var $$parentState = function(state) {\n            // Check if state has explicit parent OR we try guess parent from its name\n            var parent = state.parent || (/^(.+)\\.[^.]+$/.exec(state.name) || [])[1];\n            var isObjectParent = typeof parent === \"object\";\n            // if parent is a object reference, then extract the name\n            return isObjectParent ? parent.name : parent;\n        };\n\n        // Add the state in the chain if not already in and if not abstract\n        var $$addStateInChain = function(chain, stateRef) {\n            var conf,\n                parentParams,\n                ref = parseStateRef(stateRef),\n                force = false,\n                skip = false;\n\n            for(var i=0, l=chain.length; i<l; i+=1) {\n                if (chain[i].name === ref.state) {\n                    return;\n                }\n            }\n\n            conf = $state.get(ref.state);\n            // Get breadcrumb options\n            if(conf.ncyBreadcrumb) {\n                if(conf.ncyBreadcrumb.force){ force = true; }\n                if(conf.ncyBreadcrumb.skip){ skip = true; }\n            }\n            if((!conf.abstract || $$options.includeAbstract || force) && !skip) {\n                if(ref.paramExpr) {\n                    parentParams = $lastViewScope.$eval(ref.paramExpr);\n                }\n\n                conf.ncyBreadcrumbLink = $state.href(ref.state, parentParams || $stateParams || {});\n                chain.unshift(conf);\n            }\n        };\n\n        // Get the state for the parent step in the breadcrumb\n        var $$breadcrumbParentState = function(stateRef) {\n            var ref = parseStateRef(stateRef),\n                conf = $state.get(ref.state);\n\n            if(conf.ncyBreadcrumb && conf.ncyBreadcrumb.parent) {\n                // Handle the \"parent\" property of the breadcrumb, override the parent/child relation of the state\n                var isFunction = typeof conf.ncyBreadcrumb.parent === 'function';\n                var parentStateRef = isFunction ? conf.ncyBreadcrumb.parent($lastViewScope) : conf.ncyBreadcrumb.parent;\n                if(parentStateRef) {\n                    return parentStateRef;\n                }\n            }\n\n            return $$parentState(conf);\n        };\n\n        return {\n\n            getTemplate: function(templates) {\n                if($$options.templateUrl) {\n                    // templateUrl takes precedence over template\n                    return null;\n                } else if(templates[$$options.template]) {\n                    // Predefined templates (bootstrap, ...)\n                    return templates[$$options.template];\n                } else {\n                    return $$options.template;\n                }\n            },\n\n            getTemplateUrl: function() {\n                return $$options.templateUrl;\n            },\n\n            getStatesChain: function(exitOnFirst) { // Deliberately undocumented param, see getLastStep\n                var chain = [];\n\n                // From current state to the root\n                for(var stateRef = $state.$current.self.name; stateRef; stateRef=$$breadcrumbParentState(stateRef)) {\n                    $$addStateInChain(chain, stateRef);\n                    if(exitOnFirst && chain.length) {\n                        return chain;\n                    }\n                }\n\n                // Prefix state treatment\n                if($$options.prefixStateName) {\n                    $$addStateInChain(chain, $$options.prefixStateName);\n                }\n\n                return chain;\n            },\n\n            getLastStep: function() {\n                var chain = this.getStatesChain(true);\n                return chain.length ? chain[0] : undefined;\n            },\n\n            $getLastViewScope: function() {\n                return $lastViewScope;\n            }\n        };\n    }];\n}\n\nvar getExpression = function(interpolationFunction) {\n    if(interpolationFunction.expressions) {\n        return interpolationFunction.expressions;\n    } else {\n        var expressions = [];\n        angular.forEach(interpolationFunction.parts, function(part) {\n            if(angular.isFunction(part)) {\n                expressions.push(part.exp);\n            }\n        });\n        return expressions;\n    }\n};\n\nvar registerWatchers = function(labelWatcherArray, interpolationFunction, viewScope, step) {\n    angular.forEach(getExpression(interpolationFunction), function(expression) {\n        var watcher = viewScope.$watch(expression, function() {\n            step.ncyBreadcrumbLabel = interpolationFunction(viewScope);\n        });\n        labelWatcherArray.push(watcher);\n    });\n\n};\n\nvar deregisterWatchers = function(labelWatcherArray) {\n    angular.forEach(labelWatcherArray, function(deregisterWatch) {\n        deregisterWatch();\n    });\n};\n\nfunction BreadcrumbDirective($interpolate, $breadcrumb, $rootScope) {\n    var $$templates = {\n        bootstrap2: '<ul class=\"breadcrumb\">' +\n            '<li ng-repeat=\"step in steps\" ng-switch=\"$last || !!step.abstract\" ng-class=\"{active: $last}\">' +\n            '<a ng-switch-when=\"false\" href=\"{{step.ncyBreadcrumbLink}}\">{{step.ncyBreadcrumbLabel}}</a>' +\n            '<span ng-switch-when=\"true\">{{step.ncyBreadcrumbLabel}}</span>' +\n            '<span class=\"divider\" ng-hide=\"$last\">/</span>' +\n            '</li>' +\n            '</ul>',\n        bootstrap3: '<ol class=\"breadcrumb\">' +\n            '<li ng-repeat=\"step in steps\" ng-class=\"{active: $last}\" ng-switch=\"$last || !!step.abstract\">' +\n            '<a ng-switch-when=\"false\" href=\"{{step.ncyBreadcrumbLink}}\">{{step.ncyBreadcrumbLabel}}</a>' +\n            '<span ng-switch-when=\"true\">{{step.ncyBreadcrumbLabel}}</span>' +\n            '</li>' +\n            '</ol>'\n    };\n\n    return {\n        restrict: 'AE',\n        replace: true,\n        scope: {},\n        template: $breadcrumb.getTemplate($$templates),\n        templateUrl: $breadcrumb.getTemplateUrl(),\n        link: {\n            post: function postLink(scope) {\n                var labelWatchers = [];\n\n                var renderBreadcrumb = function() {\n                    deregisterWatchers(labelWatchers);\n                    labelWatchers = [];\n                    \n                    var viewScope = $breadcrumb.$getLastViewScope();\n                    scope.steps = $breadcrumb.getStatesChain();\n                    angular.forEach(scope.steps, function (step) {\n                        if (step.ncyBreadcrumb && step.ncyBreadcrumb.label) {\n                            var parseLabel = $interpolate(step.ncyBreadcrumb.label);\n                            step.ncyBreadcrumbLabel = parseLabel(viewScope);\n                            // Watcher for further viewScope updates\n                            registerWatchers(labelWatchers, parseLabel, viewScope, step);\n                        } else {\n                            step.ncyBreadcrumbLabel = step.name;\n                        }\n                    });\n                };\n\n                $rootScope.$on('$viewContentLoaded', function (event) {\n                    if(!event.targetScope.ncyBreadcrumbIgnore) {\n                        renderBreadcrumb();\n                    }\n                });\n\n                // View(s) may be already loaded while the directive's linking\n                renderBreadcrumb();\n            }\n        }\n    };\n}\nBreadcrumbDirective.$inject = ['$interpolate', '$breadcrumb', '$rootScope'];\n\nfunction BreadcrumbLastDirective($interpolate, $breadcrumb, $rootScope) {\n\n    return {\n        restrict: 'A',\n        scope: {},\n        template: '{{ncyBreadcrumbLabel}}',\n        compile: function(cElement, cAttrs) {\n\n            // Override the default template if ncyBreadcrumbLast has a value\n            var template = cElement.attr(cAttrs.$attr.ncyBreadcrumbLast);\n            if(template) {\n                cElement.html(template);\n            }\n\n            return {\n                post: function postLink(scope) {\n                    var labelWatchers = [];\n\n                    var renderLabel = function() {\n                        deregisterWatchers(labelWatchers);\n                        labelWatchers = [];\n                        \n                        var viewScope = $breadcrumb.$getLastViewScope();\n                        var lastStep = $breadcrumb.getLastStep();\n                        if(lastStep) {\n                            scope.ncyBreadcrumbLink = lastStep.ncyBreadcrumbLink;\n                            if (lastStep.ncyBreadcrumb && lastStep.ncyBreadcrumb.label) {\n                                var parseLabel = $interpolate(lastStep.ncyBreadcrumb.label);\n                                scope.ncyBreadcrumbLabel = parseLabel(viewScope);\n                                // Watcher for further viewScope updates\n                                // Tricky last arg: the last step is the entire scope of the directive !\n                                registerWatchers(labelWatchers, parseLabel, viewScope, scope);\n                            } else {\n                                scope.ncyBreadcrumbLabel = lastStep.name;\n                            }\n                        }\n                    };\n\n                    $rootScope.$on('$viewContentLoaded', function (event) {\n                        if(!event.targetScope.ncyBreadcrumbIgnore) {\n                            renderLabel();\n                        }\n                    });\n\n                    // View(s) may be already loaded while the directive's linking\n                    renderLabel();\n                }\n            };\n\n        }\n    };\n}\nBreadcrumbLastDirective.$inject = ['$interpolate', '$breadcrumb', '$rootScope'];\n\nfunction BreadcrumbTextDirective($interpolate, $breadcrumb, $rootScope) {\n\n    return {\n        restrict: 'A',\n        scope: {},\n        template: '{{ncyBreadcrumbChain}}',\n\n        compile: function(cElement, cAttrs) {\n            // Override the default template if ncyBreadcrumbText has a value\n            var template = cElement.attr(cAttrs.$attr.ncyBreadcrumbText);\n            if(template) {\n                cElement.html(template);\n            }\n            \n            var separator = cElement.attr(cAttrs.$attr.ncyBreadcrumbTextSeparator) || ' / ';\n\n            return {\n                post: function postLink(scope) {\n                    var labelWatchers = [];\n                    \n                    var registerWatchersText = function(labelWatcherArray, interpolationFunction, viewScope) {\n                        angular.forEach(getExpression(interpolationFunction), function(expression) {\n                            var watcher = viewScope.$watch(expression, function(newValue, oldValue) {\n                                if (newValue !== oldValue) {\n                                    renderLabel();\n                                }\n                            });\n                            labelWatcherArray.push(watcher);\n                        });\n                    };\n\n                    var renderLabel = function() {\n                        deregisterWatchers(labelWatchers);\n                        labelWatchers = [];\n                        \n                        var viewScope = $breadcrumb.$getLastViewScope();\n                        var steps = $breadcrumb.getStatesChain();\n                        var combinedLabels = [];\n                        angular.forEach(steps, function (step) {\n                            if (step.ncyBreadcrumb && step.ncyBreadcrumb.label) {\n                                var parseLabel = $interpolate(step.ncyBreadcrumb.label);\n                                combinedLabels.push(parseLabel(viewScope));\n                                // Watcher for further viewScope updates\n                                registerWatchersText(labelWatchers, parseLabel, viewScope);\n                            } else {\n                                combinedLabels.push(step.name);\n                            }\n                        });\n                        \n                        scope.ncyBreadcrumbChain = combinedLabels.join(separator);\n                    };\n\n                    $rootScope.$on('$viewContentLoaded', function (event) {\n                        if(!event.targetScope.ncyBreadcrumbIgnore) {\n                            renderLabel();\n                        }\n                    });\n\n                    // View(s) may be already loaded while the directive's linking\n                    renderLabel();\n                }\n            };\n\n        }\n    };\n}\nBreadcrumbTextDirective.$inject = ['$interpolate', '$breadcrumb', '$rootScope'];\n\nangular.module('ncy-angular-breadcrumb', ['ui.router.state'])\n    .provider('$breadcrumb', $Breadcrumb)\n    .directive('ncyBreadcrumb', BreadcrumbDirective)\n    .directive('ncyBreadcrumbLast', BreadcrumbLastDirective)\n    .directive('ncyBreadcrumbText', BreadcrumbTextDirective);\n})(window, window.angular);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/angular-breadcrumb/release/angular-breadcrumb.js\n ** module id = 105\n ** module chunks = 3\n **/"],"sourceRoot":""}